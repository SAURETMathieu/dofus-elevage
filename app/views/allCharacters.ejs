<%- include('./partials/header'); -%>
<main class="main__index">
  <h1 class="h1-admin-page">
    Tous les personnages
    <% if(serverName !== undefined){%>
      : serveur 
      <%= serverName%>
    <% } %>
  </h1>

  <div class="admin__container-list column">
    <form class="form__search" action="/id/characters" method="GET">
      <div class="form__search-container search-characters">
        <input
          type="text"
          id="searchInput"
          name="search"
          placeholder="Recherche par nom"
          required
        />
        <button type="submit">Rechercher</button>
      </div>
    </form>

    <table>
      <thead>
        <tr>
          <th>Serveur</th>
          <th>Personnage</th>
          <th>Reproduction</th>
          <th>Accouchement</th>
          <th>Male</th>
          <th>Femelle</th>
          <th>Specialité</th>
          <th>Réaccoupler</th>
          <th>Statut</th>
          <th>Reproduction</th>
          <th>Modifier</th>
          <th>Supprimer</th>
        </tr>
      </thead>
      <tbody>
      <% characters.forEach(character => { %>
        <tr id="character-<%= character.id %>">
         <td style="background-color: <%= character.account.color %>">
            <a href="/accounts?server=<%= character.account.server.id %>" class="inline-block">
              <img class="table__img-server" src="/images/<%= character.account.server.img %>" alt="logo du serveur dofus <%= character.account.server.name %>" >
            </a>
          </td>
          <td style="background-color: <%= character.account.color %>">
            <div class="table__account"><%= character.account.name %></div>
            <img class="table__img-perso" src="/images/perso-<%= character.class%>.png" alt="classe du jeu dofus: <%= character.class%>">
            <div class="table__character"><%= character.name %></div>
          </td>
          <td class="table__date">
            <div><%= character.dayRepro %></div>
            <div><%= character.dateRepro %></div>
            <div><%= character.hoursRepro %></div> 
          </td>
          <td class="table__date">
            <div><%= character.dayBirth %></div>
            <div><%= character.dateBirth %></div>
            <div><%= character.hoursBirth %></div> 
          </td>
          <td><img src="<%= character.breedMale.image %>" alt="dragodinde <%= character.breedMale.name %>" ></td>
          <td><img src="<%= character.breedFemale.image %>" alt="dragodinde <%= character.breedFemale.name %>" ></td>
          <td class="table__spe">
            <section class="section-speciality">
              <%= character.speMale %>
            </section>
            <section class="section-speciality">
              <%= character.speFemale %>
            </section>
          </td>
          <td>
            <button class="button-reproduction">
            <img src="/images/bouttonrepro.png" class="table__couple" alt="deux chiens qui s'accouplent" >
            </button>
          </td>
          <td>Féconde</td>
          <td><%= character.reproduction %> / 20</td>
          <td>
            <a href="/character/update/<%= character.id %>"
              ><i class="fa-regular fa-pen-to-square" style="color: #000000"></i
            ></a>
          </td>
          <td>
            <a href="#" onclick="deleteCharacter(<%= character.id %>)">
              <i class="fa-regular fa-trash-can" style="color: #000000"></i
            ></a>
          </td>
        </tr>
      <% }) %>
      </tbody>
    </table>
  </div>
</main>

<%- include('./partials/footer'); -%>
