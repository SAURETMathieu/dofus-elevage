<%- include('./partials/header'); -%>
<main class="admin__main">
  <h1 class="h1-admin-page">Gestion des users - Administrateurs</h1>
  <%- include('./partials/adminNavBar'); -%>
  
  <div class="admin__container-list">

    <form class="form__search" action="/admin/users" method="GET">
      <div class="form__search-container">
        <input type="text" id="searchInput" name="search" placeholder="Entrez votre recherche ici" required>
        <button type="submit">Rechercher</button>
      </div>
    </form>

    <table>
      <thead>
        <tr>
          <% locals.attributes.forEach(attribute => { %>
            <% if (attribute !== "password") { %>
              <th><%= attribute %></th>
            <% } %>
          <% }) %>
          <th>Update</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody>
        <% for (let i = 0; i < locals.users.length; i++) { %>
          <tr>
            <% locals.attributes.forEach(attribute => { %>
              <% if (attribute !== "password") { %>
                <% if (attribute === "created_at" || attribute === "updated_at") { %>
                <td><%= new Date(locals.users[i][attribute]).toLocaleString('fr') %></td>
                <% }else{ %>
                  <td><%= locals.users[i][attribute] %></td>
                <%}%>
              <% } %>
            <% }) %>
            <td><a href="/admin/users/update/<%= locals.users[i].id%>"><i class="fa-regular fa-pen-to-square" style="color: #000000;"></i></a></td>
            <td><a href="/admin/users/delete/<%= locals.users[i].id%>"><i class="fa-regular fa-trash-can" style="color: #000000;"></i></a></td>
          </tr>
        <% } %>
      </tbody>
    </table>
  </div>
</main>
<%- include('./partials/footer'); -%>